{
  "hash": "687c5b6554cef1b69b3f3c092ba8a7fe",
  "result": {
    "markdown": "---\ntitle: \"Graphic Design with ggplot2\"\nsubtitle: \"<span style='font-size:1.75em;line-height:1.1;'>Working with Colors</span></span>\"\nauthor: \"<b style='color:#28a87d;'><a href='https://www.cedricscherer.com'>Cédric Scherer</a></b> **//** rstudio::conf **//** July 2022\"\nformat: \n  revealjs: \n    theme: css/style.scss\n    footer: '**[Cédric Scherer](https://cedricscherer.com) //** rstudio::conf **//** July 2022'\n    #'rstudio::conf(workshop = \"Graphic Design with ggplot2\", instructor = \"Cédric Scherer\")'\n    transition: fade\n    progress: true\n    multiplex: false\n    preview-links: true\n    scrollable: false\n    hide-inactive-cursor: true\n    highlight-style: printing\n    chalkboard:\n      theme: whiteboard\n      boardmarker-width: 4\n      buttons: true\n    pause: true\n    mainfont: Cabinet Grotesk\neditor: source\nknitr:\n  opts_chunk: \n    dev: \"ragg_png\"\n    retina: 1\n    dpi: 200\nexecute:\n  freeze: auto\n  cache: true\n  echo: true\n  fig-width: 5\n  fig-height: 6\n---\n\n\n## Setup\n\n\n::: {.cell hash='07_colors_cache/revealjs/prep_810de221017ad58d07225ac988f4d47e'}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n\nlibrary(tidyverse)\n\nbikes <- readr::read_csv(\n  here::here(\"data\", \"london-bikes-custom.csv\"), \n  col_types = \"Dcfffilllddddc\"\n)\n\nbikes$season <- forcats::fct_inorder(bikes$season)\n\ntheme_set(theme_light(base_size = 14, base_family = \"Roboto Condensed\"))\n\ntheme_update(\n  panel.grid.minor = element_blank(),\n  plot.title = element_text(face = \"bold\"),\n  legend.position = \"top\",\n  plot.title.position = \"plot\"\n)\n```\n:::\n\n\n# Color Palettes\n\n## Pre-Defined Color Palettes: Viridis\n\n\n::: {.cell output-location='column' hash='07_colors_cache/revealjs/color-palettes-viridis_eb48e1eff3be80560e06253e8c13ac3c'}\n\n```{.r .cell-code  code-line-numbers=\"1,2,3,4,5,6|7,8,9,10\"}\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = season)\n  ) +\n  geom_boxplot() +\n  scale_fill_viridis_d(\n    option = \"plasma\",\n    begin = .3\n  )\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/color-palettes-viridis-1.png){width=1000}\n:::\n:::\n\n\n## Pre-Defined Color Palettes: Viridis\n\n\n::: {.cell output-location='column' hash='07_colors_cache/revealjs/color-palettes-viridis-month_a5b17c2c0380b52465ff7d32a3e2dee0'}\n\n```{.r .cell-code  code-line-numbers=\"4\"}\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = month)\n  ) +\n  geom_boxplot() +\n  scale_fill_viridis_d(\n    option = \"plasma\",\n    begin = .3\n  )\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/color-palettes-viridis-month-1.png){width=1000}\n:::\n:::\n\n\n## Pre-Defined Color Palettes: Viridis\n\n\n::: {.cell output-location='column' hash='07_colors_cache/revealjs/color-palettes-viridis-cont_df4f562f1441f76225d4de50672f793d'}\n\n```{.r .cell-code  code-line-numbers=\"3,4,7|7,9\"}\nggplot(\n    bikes, \n    aes(x = temp_feel, y = count, \n        color = temp_feel)\n  ) +\n  geom_point() +\n  scale_color_viridis_c(\n    option = \"plasma\",\n    end = .9\n  )\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/color-palettes-viridis-cont-1.png){width=1000}\n:::\n:::\n\n\n## Pre-Defined Color Palettes: Viridis\n\n\n::: {.cell output-location='column' hash='07_colors_cache/revealjs/color-palettes-viridis-cont-rev_8b4f02b5e0442ae5c13c9861ea97dc39'}\n\n```{.r .cell-code  code-line-numbers=\"10\"}\nggplot(\n    bikes, \n    aes(x = temp_feel, y = count, \n        color = temp_feel)\n  ) +\n  geom_point() +\n  scale_color_viridis_c(\n    option = \"plasma\",\n    end = .9,\n    direction = -1\n  )\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/color-palettes-viridis-cont-rev-1.png){width=1000}\n:::\n:::\n\n\n## Pre-Defined Color Palettes: Brewer\n\n\n::: {.cell output-location='column' hash='07_colors_cache/revealjs/color-palettes-brewer_932b55969fe2c25e403d73b20a1f67d4'}\n\n```{.r .cell-code  code-line-numbers=\"7,8,9\"}\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = season)\n  ) +\n  geom_boxplot() +\n  scale_fill_brewer(\n    palette = \"Set1\"\n  )\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/color-palettes-brewer-1.png){width=1000}\n:::\n:::\n\n\n## Pre-Defined Color Palettes: Brewer\n\n\n::: {.cell hash='07_colors_cache/revealjs/color-palettes-brewer-show-all_a3a22da78909f2a4819e3f50f42f9dd5'}\n\n```{.r .cell-code}\nRColorBrewer::display.brewer.all()\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/color-palettes-brewer-show-all-1.png){width=2400}\n:::\n:::\n\n\n## Pre-Defined Color Palettes: Brewer\n\n\n::: {.cell hash='07_colors_cache/revealjs/color-palettes-brewer-show-cvd_c44081a7c13f2e14cf066e63bec58dd3'}\n\n```{.r .cell-code}\nRColorBrewer::display.brewer.all(colorblindFriendly = TRUE)\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/color-palettes-brewer-show-cvd-1.png){width=2400}\n:::\n:::\n\n\n## {rcartocolor}\n\n\n::: {.cell output-location='column' hash='07_colors_cache/revealjs/color-palettes-carto_ee0dd155bc8a31734108bd160fda913a'}\n\n```{.r .cell-code  code-line-numbers=\"9,10,11\"}\n# install.packages(\"rcartocolor\")\n\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = season)\n  ) +\n  geom_boxplot() +\n  rcartocolor::scale_fill_carto_d(\n    palette = \"Vivid\" \n  )\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/color-palettes-carto-1.png){width=1000}\n:::\n:::\n\n\n## {rcartocolor}\n\n\n::: {.cell hash='07_colors_cache/revealjs/color-palettes-carto-show-all_d34276361a5df49e3c090893c31827c4'}\n\n```{.r .cell-code}\nrcartocolor::display_carto_all()\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/color-palettes-carto-show-all-1.png){width=2400}\n:::\n:::\n\n\n## {rcartocolor}\n\n\n::: {.cell hash='07_colors_cache/revealjs/color-palettes-carto-show-cvd_26d928c03d598bc12dcecce130403164'}\n\n```{.r .cell-code}\nrcartocolor::display_carto_all(colorblind_friendly = TRUE)\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/color-palettes-carto-show-cvd-1.png){width=2400}\n:::\n:::\n\n\n## {scico}\n\n\n::: {.cell output-location='column' hash='07_colors_cache/revealjs/color-palettes-scico_e5f08db050a1c1ddbc868b96eaa576c9'}\n\n```{.r .cell-code  code-line-numbers=\"9,10,11\"}\n# install.packages(\"scico\")\n\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = season)\n  ) +\n  geom_boxplot() +\n  scico::scale_fill_scico_d(\n    palette = \"hawaii\"\n  )\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/color-palettes-scico-1.png){width=1000}\n:::\n:::\n\n\n## {scico}\n\n\n::: {.cell hash='07_colors_cache/revealjs/color-palettes-scico-show-all_6d88a40b9ff6e4a0df204b2c8cd3983a'}\n\n```{.r .cell-code}\nscico::scico_palette_show()\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/color-palettes-scico-show-all-1.png){width=2400}\n:::\n:::\n\n\n## {ggsci} and {ggthemes}\n\n::: {layout-ncol=\"2\"}\n\n::: {.cell hash='07_colors_cache/revealjs/color-palettes-ggsci_9eb11f48c736c71b02def8a8e25cd031'}\n\n```{.r .cell-code  code-line-numbers=\"8\"}\n# install.packages(\"ggsci\")\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = season)\n  ) +\n  geom_boxplot() +\n  ggsci::scale_fill_npg()\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/color-palettes-ggsci-1.png){width=1000}\n:::\n:::\n\n::: {.cell hash='07_colors_cache/revealjs/color-palettes-ggthemes_a98d808c8ad53db84616c1fb4f2e5b25'}\n\n```{.r .cell-code  code-line-numbers=\"8\"}\n# install.packages(\"ggthemes\")\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = season)\n  ) +\n  geom_boxplot() +\n  ggthemes::scale_fill_gdocs()\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/color-palettes-ggthemes-1.png){width=1000}\n:::\n:::\n\n:::\n\n## {nord}\n\n\n::: {.cell output-location='column' hash='07_colors_cache/revealjs/color-palettes-nord_55b45675d0ccd23ca71e511ddd1259d7'}\n\n```{.r .cell-code  code-line-numbers=\"9,10,11\"}\n# install.packages(\"nord\")\n\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = season)\n  ) +\n  geom_boxplot() +\n  nord::scale_fill_nord(\n    palette = \"aurora\"\n  )\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/color-palettes-nord-1.png){width=1000}\n:::\n:::\n\n\n## {nord}\n\n\n::: {.cell output-location='column' hash='07_colors_cache/revealjs/color-palettes-nord-cont_327946a541919c7da73206c8a844f256'}\n\n```{.r .cell-code  code-line-numbers=\"9,10,11,12\"}\n# install.packages(\"nord\")\n\nggplot(\n    bikes, \n    aes(x = temp_feel, y = count, \n        color = temp_feel)\n  ) +\n  geom_point() +\n  nord::scale_color_nord(\n    palette = \"silver_mine\",\n    discrete = FALSE\n  )\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/color-palettes-nord-cont-1.png){width=1000}\n:::\n:::\n\n\n## {MetBrewer}\n\n\n::: {.cell output-location='column' hash='07_colors_cache/revealjs/color-palettes-metbrewer_d4d6bbfc34877c1711a738aec283355e'}\n\n```{.r .cell-code  code-line-numbers=\"9,10,11\"}\n# install.packages(\"MetBrewer\")\n\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = season)\n  ) +\n  geom_boxplot() +\n  MetBrewer::scale_fill_met_d(\n    name = \"Klimt\"\n  )\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/color-palettes-metbrewer-1.png){width=1000}\n:::\n:::\n\n\n## {MetBrewer}\n\n\n::: {.cell hash='07_colors_cache/revealjs/color-palettes-metbrewer-show-all_627b8a791defa021d9200277ff940fb3'}\n\n```{.r .cell-code}\nMetBrewer::display_all()\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/color-palettes-metbrewer-show-all-1.png){width=2400}\n:::\n:::\n\n\n## {MetBrewer}\n\n\n::: {.cell hash='07_colors_cache/revealjs/color-palettes-metbrewer-show-cvd_c31430624e97c86a4a64eb25be463a9b'}\n\n```{.r .cell-code}\nMetBrewer::display_all(colorblind_only = TRUE)\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/color-palettes-metbrewer-show-cvd-1.png){width=2400}\n:::\n:::\n\n\n## {MetBrewer}\n\n\n::: {.cell output-location='column' hash='07_colors_cache/revealjs/color-palettes-metbrewer-cont_eb2f3150db5b32b36b16bb49c61cffeb'}\n\n```{.r .cell-code  code-line-numbers=\"9,10,11\"}\n# install.packages(\"MetBrewer\")\n\nggplot(\n    bikes, \n    aes(x = temp_feel, y = count, \n        color = temp_feel)\n  ) +\n  geom_point() +\n  MetBrewer::scale_color_met_c(\n    name = \"Hiroshige\" \n  )\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/color-palettes-metbrewer-cont-1.png){width=1000}\n:::\n:::\n\n\n# Customize Palettes\n\n## Customize Existing Palettes\n\n\n::: {.cell output-location='column' hash='07_colors_cache/revealjs/color-palettes-carto-default_ffc3933a3f5d165b1f0256559981693c'}\n\n```{.r .cell-code  code-line-numbers=\"9,10,11\"}\nlibrary(\"rcartocolor\")\n\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = season)\n  ) +\n  geom_boxplot() +\n  rcartocolor::scale_fill_carto_d(\n    name = \"Vivid\" \n  )\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/color-palettes-carto-default-1.png){width=1000}\n:::\n:::\n\n\n## Customize Existing Palettes\n\n\n::: {.cell output-location='column' hash='07_colors_cache/revealjs/color-palettes-carto-manual_6e577279afd16f6e8ae7396ed5bdf783'}\n\n```{.r .cell-code  code-line-numbers=\"9,10,11,12,13\"}\nlibrary(\"rcartocolor\")\n\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = season)\n  ) +\n  geom_boxplot() +\n  scale_fill_manual(\n    values = carto_pal(\n      name = \"Vivid\", n = 4\n    )\n  )\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/color-palettes-carto-manual-1.png){width=1000}\n:::\n:::\n\n\n## Customize Existing Palettes\n\n\n::: {.cell output-location='column' hash='07_colors_cache/revealjs/color-palettes-carto-custom_7289147ce3418c3ff8f2cf3309e0d400'}\n\n```{.r .cell-code  code-line-numbers=\"11,12\"}\nlibrary(\"rcartocolor\")\n\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = season)\n  ) +\n  geom_boxplot() +\n  scale_fill_manual(\n    values = carto_pal(\n      name = \"Vivid\", n = 5\n    )[1:4]\n  )\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/color-palettes-carto-custom-1.png){width=1000}\n:::\n:::\n\n\n## Customize Existing Palettes\n\n\n::: {.cell output-location='column' hash='07_colors_cache/revealjs/color-palettes-carto-custom-2_c7310e4a3897d36bb6890a8bab2ccf33'}\n\n```{.r .cell-code  code-line-numbers=\"11,12\"}\nlibrary(\"rcartocolor\")\n\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = season)\n  ) +\n  geom_boxplot() +\n  scale_fill_manual(\n    values = carto_pal(\n      name = \"Vivid\", n = 6\n    )[c(1, 3:5)]\n  )\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/color-palettes-carto-custom-2-1.png){width=1000}\n:::\n:::\n\n\n## Customize Existing Palettes\n\n\n::: {.cell output-location='column' hash='07_colors_cache/revealjs/color-palettes-carto-custom-assign_0384f1e87f47232bbb6154cc430f8949'}\n\n```{.r .cell-code  code-line-numbers=\"1,2,3,4|13\"}\ncarto_custom <- \n  carto_pal(\n    name = \"Vivid\", n = 6\n  )[c(1, 3:5)]\n\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = season)\n  ) +\n  geom_boxplot() +\n  scale_fill_manual(\n    values = carto_custom\n  )\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/color-palettes-carto-custom-assign-1.png){width=1000}\n:::\n:::\n\n\n## Customize Existing Palettes\n\n\n::: {.cell output-location='column' hash='07_colors_cache/revealjs/color-palettes-carto-light_96d8c561e18f8341b30665b762de06a5'}\n\n```{.r .cell-code  code-line-numbers=\"2,4|13\"}\n# install.packages(\"colorspace\")\nlibrary(colorspace)\n\ncarto_light <- lighten(carto_custom, .8)\n\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = season)\n  ) +\n  geom_boxplot() +\n  scale_fill_manual(\n    values = carto_light\n  )\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/color-palettes-carto-light-1.png){width=1000}\n:::\n:::\n\n\n## Customize Existing Palettes\n\n\n::: {.cell output-location='column' hash='07_colors_cache/revealjs/color-palettes-carto-afterscale_42bf9841fd23cc4839d3e3e0c2b9a1d8'}\n\n```{.r .cell-code  code-line-numbers=\"12|6,7,8,9|6|7,9|8|\"}\nggplot(\n    bikes, \n    aes(x = day_night, y = count)\n  ) +\n  geom_boxplot(\n    aes(fill = season,\n        fill = after_scale(\n          lighten(fill, .8)\n    ))\n  ) +\n  scale_fill_manual(\n    values = carto_custom\n  )\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/color-palettes-carto-afterscale-1.png){width=1000}\n:::\n:::\n\n\n## Customize Existing Palettes\n\n\n::: {.cell output-location='column' hash='07_colors_cache/revealjs/color-palettes-carto-afterscale-stage_36d947c02831794a7f175b82217dff50'}\n\n```{.r .cell-code  code-line-numbers=\"7,8,9,10,11|7|9|10\"}\nggplot(\n    bikes, \n    aes(x = day_night, y = count)\n  ) +\n  geom_boxplot(\n    aes(\n      fill = stage(\n        season,\n        after_scale =\n          lighten(fill, .8)\n      )\n    )\n  ) +\n  scale_fill_manual(\n    values = carto_custom\n  )\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/color-palettes-carto-afterscale-stage-1.png){width=1000}\n:::\n:::\n\n\n## Customize Existing Palettes\n\n\n::: {.cell output-location='column' hash='07_colors_cache/revealjs/color-palettes-carto-afterscale-2_02830fd9fabd2d1e178869c7ad13ae35'}\n\n```{.r .cell-code  code-line-numbers=\"6,11|7,8,9\"}\nggplot(\n    bikes, \n    aes(x = day_night, y = count)\n  ) +\n  geom_boxplot(\n    aes(color = season,\n        fill = after_scale(\n          lighten(color, .8)\n    ))\n  ) +\n  scale_color_manual(\n    values = carto_custom\n  )\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/color-palettes-carto-afterscale-2-1.png){width=1000}\n:::\n:::\n\n\n## Customize Existing Palettes\n\n\n::: {.cell output-location='column' hash='07_colors_cache/revealjs/color-palettes-carto-afterscale-combined_583e425103951357dc424e64ecb6ca98'}\n\n```{.r .cell-code  code-line-numbers=\"11,12,13,14,15,16,17,18|13,14,15,16\"}\nggplot(\n    bikes, \n    aes(x = day_night, y = count)\n  ) +\n  geom_boxplot(\n    aes(color = season,\n        fill = after_scale(\n          lighten(color, .8)\n    ))\n  ) +\n  geom_jitter(\n    aes(color = season), \n    position = position_jitterdodge(\n      dodge.width = .75, \n      jitter.width = .2\n    ),\n    alpha = .4\n  ) +\n  scale_color_manual(\n    values = carto_custom\n  )\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/color-palettes-carto-afterscale-combined-1.png){width=1000}\n:::\n:::\n\n\n## Customize Existing Palettes\n\n\n::: {.cell output-location='column' hash='07_colors_cache/revealjs/color-palettes-carto-afterscale-combined-2_807cf636fd0124560fb8904432c1c581'}\n\n```{.r .cell-code  code-line-numbers=\"12,13,14,15|14\"}\nggplot(\n    bikes, \n    aes(x = day_night, y = count)\n  ) +\n  geom_boxplot(\n    aes(color = season,\n        fill = after_scale(\n          lighten(color, .8)\n        ))\n  ) +\n  geom_jitter(\n    aes(color = season,\n        color = after_scale(\n          darken(color, .3)\n    )), \n    position = position_jitterdodge(\n      dodge.width = .75, \n      jitter.width = .2\n    ),\n    alpha = .4\n  ) +\n  scale_color_manual(\n    values = carto_custom\n  )\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/color-palettes-carto-afterscale-combined-2-1.png){width=1000}\n:::\n:::\n\n\n## Customize Existing Palettes\n\n\n::: {.cell output-location='column' hash='07_colors_cache/revealjs/color-palettes-carto-afterscale-combined-3_0166c77ae306dab3894bda22df83be8e'}\n\n```{.r .cell-code  code-line-numbers=\"13,14,15\"}\nggplot(\n    bikes, \n    aes(x = day_night, y = count)\n  ) +\n  geom_boxplot(\n    aes(color = season,\n        fill = after_scale(\n          lighten(color, .8)\n        ))\n  ) +\n  geom_jitter(\n    aes(color = season,\n        color = after_scale(\n          darken(color, .3)\n        )), \n    position = position_jitterdodge(\n      dodge.width = .75, \n      jitter.width = .2\n    ),\n    alpha = .4\n  ) +\n  scale_color_manual(\n    values = carto_custom\n  )\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/color-palettes-carto-afterscale-combined-3-1.png){width=1000}\n:::\n:::\n\n\n# Create New Palettes\n\n## Create Sequential Palettes\n\n\n::: {.cell output-location='column' hash='07_colors_cache/revealjs/color-palettes-gradient_7af9bed534a22db581be9501bb151d80'}\n\n```{.r .cell-code  code-line-numbers=\"7,10|8,9\"}\nggplot(\n    bikes, \n    aes(x = temp_feel, y = count, \n        color = temp_feel)\n  ) +\n  geom_point() +\n  scale_color_gradient(\n    low = \"#28A87D\",\n    high = \"#FFD166\"\n  )\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/color-palettes-gradient-1.png){width=1000}\n:::\n:::\n\n\n## Create Diverging Palettes\n\n\n::: {.cell output-location='column' hash='07_colors_cache/revealjs/color-palettes-gradient2_bc6d50c94b918a5ab229805b6b7e1619'}\n\n```{.r .cell-code  code-line-numbers=\"7,11|8,9,10|10\"}\nggplot(\n    bikes, \n    aes(x = temp_feel, y = count, \n        color = temp_feel)\n  ) +\n  geom_point() +\n  scale_color_gradient2(\n    low = \"#663399\",\n    high = \"#993334\",\n    mid = \"grey95\"\n  )\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/color-palettes-gradient2-1.png){width=1000}\n:::\n:::\n\n\n## Create Diverging Palettes\n\n\n::: {.cell output-location='column' hash='07_colors_cache/revealjs/color-palettes-gradient2-midpoint_23709e0acfab32b7dedd9c73c368f00c'}\n\n```{.r .cell-code  code-line-numbers=\"11\"}\nggplot(\n    bikes, \n    aes(x = temp_feel, y = count, \n        color = temp_feel)\n  ) +\n  geom_point() +\n  scale_color_gradient2(\n    low = \"#663399\",\n    high = \"#993334\",\n    mid = \"grey92\",\n    midpoint = 10    \n  )\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/color-palettes-gradient2-midpoint-1.png){width=1000}\n:::\n:::\n\n\n## Create Diverging Palettes\n\n\n::: {.cell output-location='column' hash='07_colors_cache/revealjs/color-palettes-gradient2-midpoint-limits_556e1d55eff174bed0807d325531b210'}\n\n```{.r .cell-code  code-line-numbers=\"12\"}\nggplot(\n    bikes, \n    aes(x = temp_feel, y = count, \n        color = temp_feel)\n  ) +\n  geom_point() +\n  scale_color_gradient2(\n    low = \"#663399\",\n    high = \"#993334\",\n    mid = \"grey92\",\n    midpoint = 10,\n    limits = c(-10, 30)   \n  )\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/color-palettes-gradient2-midpoint-limits-1.png){width=1000}\n:::\n:::\n\n\n## Create Any Palette\n\n\n::: {.cell output-location='column' hash='07_colors_cache/revealjs/color-palettes-gradientn_faea2e0c315708be666667874c43a569'}\n\n```{.r .cell-code  code-line-numbers=\"7,8,9\"}\nggplot(\n    bikes, \n    aes(x = temp_feel, y = count, \n        color = temp_feel)\n  ) +\n  geom_point() +\n  scale_color_gradientn(\n    colors = carto_custom  \n  )\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/color-palettes-gradientn-1.png){width=1000}\n:::\n:::\n\n\n## Create Any Palette\n\n\n::: {.cell output-location='column' hash='07_colors_cache/revealjs/color-palettes-gradientn-weight_3bd631358c077497b7c66375fdb2609e'}\n\n```{.r .cell-code  code-line-numbers=\"9\"}\nggplot(\n    bikes, \n    aes(x = temp_feel, y = count, \n        color = temp_feel)\n  ) +\n  geom_point() +\n  scale_color_gradientn(\n    colors = carto_custom,\n    values = c(0, .2, .8, 1)\n  )\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/color-palettes-gradientn-weight-1.png){width=1000}\n:::\n:::\n\n\n# Build Your Own<br>`scale_color|fill_*()`\n\n\n\n---\n\n![Illustration by W. E. B. Du Bois, Courtesy Library of Congress](img/colors/dubois-viz.png){fig-alt=\"“Black Lives 1900: W. E. B. Du Bois at the Paris Exposition” reprints some of the striking photographs and graphics that Du Bois and his curators commissioned for the World’s Fair, here the colorful stacked bar chart on income and expenditure of 150 negro families in Atlanta.\" fig-width=\"60%\"}\n\n##  {background-image=\"img/colors/dubois-colors.png\" background-position=\"center\" background-size=\"92%\" background-alt=\"Seven colors based on and inspired by the graphic from W. E. B. Du Bois.\"}\n\n## Build Your Own `scale_color|fill_*()`\n\n::: {.cell hash='07_colors_cache/revealjs/dubois-colors-function_1497910ee4748761be6ea243d88eb311'}\n\n```{.r .cell-code  code-line-numbers=\"1,18|2,3,4,5,6,7,8,9,10,11|13,14,15,16,17|20\"}\ndubois_colors <- function(...) {\n  dubois_cols <- c(\n    `black`    = \"#000000\",\n    `purple`   = \"#582f6c\",\n    `violet`   = \"#94679C\",\n    `pink`     = \"#ef849f\",\n    `softred`  = \"#f4b7a7\",\n    `iceblue`  = \"#bccbf3\",\n    `palegrey` = \"#e4e4e4\"\n  )\n\n  cols <- c(...)\n\n  if (is.null(cols))\n    return (dubois_cols)\n\n  dubois_cols[cols]\n}\n\ndubois_colors(\"black\", \"pink\", \"softred\", \"iceblue\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n    black      pink   softred   iceblue \n\"#000000\" \"#ef849f\" \"#f4b7a7\" \"#bccbf3\" \n```\n:::\n:::\n\n## Build Your Own `scale_color|fill_*_d()`\n\n::: {.cell hash='07_colors_cache/revealjs/dubois-colors-pal-d-function_c7abcf910b2b8fe4aea3877fbe48e811'}\n\n```{.r .cell-code  code-line-numbers=\"1,2,12,13|3|5,6,7,8|9|11|13|15\"}\ndubois_pal_d <- function(palette = \"default\", reverse = FALSE) {\n  function(n) {\n    if(n > 5) stop('Palettes only contains 5 colors')\n\n    if (palette == \"default\") { pal <- dubois_colors(\"black\", \"violet\", \"softred\", \"iceblue\", \"palegrey\")[1:n] }\n    if (palette == \"dark\") { pal <- dubois_colors(1:5)[1:n] }\n    if (palette == \"light\") { pal <- dubois_colors(3:7)[1:n] }\n    \n    pal <- unname(pal)\n\n    if (reverse) rev(pal) else pal\n  }\n}\n\ndubois_pal_d()(3)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"#000000\" \"#94679C\" \"#f4b7a7\"\n```\n:::\n:::\n\n## Build Your Own `scale_fill|color_*_d()`\n\n::: {.cell hash='07_colors_cache/revealjs/dubois-scale-discrete-functions_5c0ce8953a41447f2c26ac51084f6734'}\n\n```{.r .cell-code  code-line-numbers=\"1,2,3,4,5,6,7|9,10,11,12,13,14,15|2,10|4,12|6,14\"}\nscale_color_dubois_d <- function(palette = \"default\", reverse = FALSE, ...) {\n  if (!palette %in% c(\"default\", \"dark\", \"light\")) stop('Palette should be \"default\", \"dark\" or \"light\".')\n\n  pal <- dubois_pal_d(palette = palette, reverse = reverse)\n\n  ggplot2::discrete_scale(\"colour\", paste0(\"dubois_\", palette), palette = pal, ...)\n}\n\nscale_fill_dubois_d <- function(palette = \"default\", reverse = FALSE, ...) {\n  if (!palette %in% c(\"default\", \"dark\", \"light\")) stop('Palette should be \"default\", \"dark\" or \"light\".')\n\n  pal <- dubois_pal_d(palette = palette, reverse = reverse)\n\n  ggplot2::discrete_scale(\"fill\", paste0(\"dubois_\", palette), palette = pal, ...)\n}\n```\n:::\n\n## Use Your Own `scale_fill_*_d()`\n\n::: {.cell output-location='column' hash='07_colors_cache/revealjs/dubois-scales-fill-d-use_3126f8588f5d2f342e8e3d3bf6935980'}\n\n```{.r .cell-code  code-line-numbers=\"4,7\"}\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = season)\n  ) +\n  geom_boxplot() +\n  scale_fill_dubois_d()\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/dubois-scales-fill-d-use-1.png){width=1000}\n:::\n:::\n\n## Use Your Own `scale_color_*_d()`\n\n::: {.cell output-location='column' hash='07_colors_cache/revealjs/dubois-scales-color-d-use_2701cb3b18bed8039947e1e5525d3698'}\n\n```{.r .cell-code  code-line-numbers=\"4,7,8,9,10\"}\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        color = season)\n  ) +\n  geom_boxplot() +\n  scale_color_dubois_d(\n    palette = \"dark\",\n    reverse = TRUE\n  )\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/dubois-scales-color-d-use-1.png){width=1000}\n:::\n:::\n\n\n# Test Your Palettes\n\n\n## Emulate CVD\n\n::: {.cell output-location='column' hash='07_colors_cache/revealjs/cvd-emulation-deutan_4c5fcc8bb63c766b3a8eea529010ec39'}\n\n```{.r .cell-code  code-line-numbers=\"1,2,3,4,5,6|14,15,16\"}\ndeut <- \n  colorspace::deutan(\n    viridis::turbo(\n      n = 100, direction = -1\n    )\n  )\n\nggplot(\n    bikes, \n    aes(x = temp_feel, y = count,\n        color = temp_feel)\n  ) +\n  geom_point() +\n  scale_color_gradientn(\n    colors = deut\n  )\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/cvd-emulation-deutan-1.png){width=1000}\n:::\n:::\n\n## Emulate CVD\n\n::: {.cell output-location='column' hash='07_colors_cache/revealjs/cvd-emulation-all-prep_4bade0e283f2689d294bf02398cdadba'}\n\n```{.r .cell-code}\ng <- \n  ggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = season)\n  ) +\n  geom_boxplot() +\n  scale_fill_manual(\n    values = carto_custom\n  )\n\ng\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/cvd-emulation-all-prep-1.png){width=1000}\n:::\n:::\n\n## Emulate CVD\n\n::: {.cell output-location='column' hash='07_colors_cache/revealjs/cvd-emulation-all_256d7ea8b17198a99e71d3179e549fc5'}\n\n```{.r .cell-code}\n# devtools::install_github(\n#   \"clauswilke/colorblindr\"\n# )\n\ncolorblindr::cvd_grid(g)\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/cvd-emulation-all-1.png){width=1000}\n:::\n:::\n\n## Emulate CVD\n\n::: {.cell hash='07_colors_cache/revealjs/cvd-emulation-all-2-prep_66c3a4f5b0c69f1426de798ebbfeab7b'}\n\n:::\n\n## Emulate CVD\n\n::: {.cell hash='07_colors_cache/revealjs/cvd-emulation-all-2_201633157681aa3b6e2a288086faf6c0'}\n\n```{.r .cell-code}\n# devtools::install_github(\"clauswilke/colorblindr\")\n\ncolorblindr::cvd_grid(g2)\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/cvd-emulation-all-2-1.png){width=2800}\n:::\n:::\n\n## Emulate CVD\n\n::: {.cell hash='07_colors_cache/revealjs/cvd-emulation-all-3-prep_584001b6525fe499026cf0aaf77f44b0'}\n\n:::\n\n## Emulate CVD\n\n::: {.cell hash='07_colors_cache/revealjs/cvd-emulation-all-3_6e0b2798f5d7e2d8c21de9a787cb625a'}\n\n```{.r .cell-code}\n# devtools::install_github(\"clauswilke/colorblindr\")\n\ncolorblindr::cvd_grid(g3)\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/cvd-emulation-all-3-1.png){width=2800}\n:::\n:::\n\n## <b style='color:#663399;'>Recap</b>\n\n::: recap\n::: incremental\n-   use **categorical** palettes for **qualitative** data\n    -  e.g. `scale_*_discrete()` and `scale_*_manual()` for custom options\n    -  e.g. `scale_*_viridis_d` and `scale_*_brewer()` for pre-defined options\n-   use **sequential or diverging** palettes for **quantitative** data\n    -  e.g. `scale_*_gradient()` or `scale_*_gradient2()` for custom options\n    -  e.g. `scale_*_viridis_c` and `scale_*_distiller()` for pre-defined options\n-   various packages provide palettes incl. `scale_*` components\n    - e.g. `{rcartocolors}`, `{scico}`, `{ggsci}`, `{ggthemes}`, `{nord}`\n-   those and even more packages return palettes as vectors\n    - modify and supply them to `scale_*_manual()` and `scale_*_gradientn()`\n-   use **`after_scale`** to modify and recycle color scales \n:::\n:::\n\n# Exercise\n\n## Exercise\n\n::: question\n-   **Create a similar visualization as close as possible:**\n:::\n\n::: {.cell layout-align=\"center\" hash='07_colors_cache/revealjs/exercise-jittered-errorbars_2074eb6408683f75f4c5e5705656a104'}\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/exercise-jittered-errorbars-1.png){fig-align='center' width=2000}\n:::\n:::\n\n# Appendix\n\n# HCL Spectrum\n\n## Evaluate HCL Spectrum\n\n::: {.cell output-location='column' hash='07_colors_cache/revealjs/color-palettes-colorspace-spec-explain_cd559b1a0183b90775b4339dbf63a6ac'}\n\n```{.r .cell-code}\ncolorspace::specplot(\n  colorspace::diverging_hcl(\n    n = 100, palette = \"Blue-Red\"\n  )\n)\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/color-palettes-colorspace-spec-explain-1.png){width=1000}\n:::\n:::\n\n## Evaluate HCL Spectrum\n\n::: {layout-ncol=\"2\"}\n::: {.cell hash='07_colors_cache/revealjs/color-palettes-scico-spec_4f63d1e47df8082130d217785eb1364d'}\n\n```{.r .cell-code}\ncolorspace::specplot(\n  scico::scico(\n    n = 100, palette = \"hawaii\"\n  )\n)\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/color-palettes-scico-spec-1.png){width=1000}\n:::\n:::\n\n::: {.cell hash='07_colors_cache/revealjs/color-palettes-metbrewer-spec_23b981adbcf78261c20f03a38d700bd4'}\n\n```{.r .cell-code}\ncolorspace::specplot(\n  MetBrewer::met.brewer(\n     n = 100, name = \"Hiroshige\"\n  )\n)\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/color-palettes-metbrewer-spec-1.png){width=1000}\n:::\n:::\n:::\n\n## Evaluate HCL Spectrum\n\n::: {layout-ncol=\"2\"}\n::: {.cell hash='07_colors_cache/revealjs/color-palettes-carto-spec_f5cac2774e59e901913bee8bc9379e1d'}\n\n```{.r .cell-code}\ncolorspace::specplot(\n  rcartocolor::carto_pal(\n    n = 7, name = \"TealRose\"\n  )\n)\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/color-palettes-carto-spec-1.png){width=1000}\n:::\n:::\n\n::: {.cell hash='07_colors_cache/revealjs/color-palettes-metbrewer-spec-2_65cef74e2e715f1a74122dfeef59ccde'}\n\n```{.r .cell-code}\ncolorspace::specplot(\n  MetBrewer::met.brewer(\n     n = 100, name = \"Cassatt2\"\n  )\n)\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/color-palettes-metbrewer-spec-2-1.png){width=1000}\n:::\n:::\n:::\n\n## Evaluate HCL Spectrum\n\n::: {layout-ncol=\"2\"}\n::: {.cell hash='07_colors_cache/revealjs/color-palettes-rainbow-spec_bbf35986a35a9157abe330fd54934f9a'}\n\n```{.r .cell-code}\ncolorspace::specplot(\n  rainbow(\n    n = 100\n  )\n)\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/color-palettes-rainbow-spec-1.png){width=1000}\n:::\n:::\n\n::: {.cell hash='07_colors_cache/revealjs/color-palette-viridis-spec_61abfa4ac8de5315186007904cec820b'}\n\n```{.r .cell-code}\ncolorspace::specplot(\n  viridis::turbo(\n     n = 100, direction = -1\n  )\n)\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/color-palette-viridis-spec-1.png){width=1000}\n:::\n:::\n:::\n\n## Build Your Own `scale_color|fill_*_c()`\n\n::: {.cell hash='07_colors_cache/revealjs/dubois-colors-pal-c-function_c1da486d3b3f901907ae72d9e69611b0'}\n\n```{.r .cell-code  code-line-numbers=\"1,13|2,3,4,5|7,8|10|12|15\"}\ndubois_pal_c <- function(palette = \"dark\", reverse = FALSE, ...) {\n  dubois_palettes <- list(\n    `dark`    = dubois_colors(\"black\", \"purple\", \"violet\", \"pink\"),\n    `light`   = dubois_colors(\"purple\", \"violet\", \"pink\", \"palered\")\n  )\n\n  pal <- dubois_palettes[[palette]]\n  pal <- unname(pal)\n\n  if (reverse) pal <- rev(pal)\n\n  grDevices::colorRampPalette(pal, ...)\n}\n\ndubois_pal_c(palette = \"light\", reverse = TRUE)(3)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"#FFFFFF\" \"#C1759D\" \"#582F6C\"\n```\n:::\n:::\n\n## Build Your Own `scale_color|fill_*_c()`\n\n::: {.cell hash='07_colors_cache/revealjs/dubois-scale-continuous-functions_d9127f533e4b4e150d170ade381fe41c'}\n\n```{.r .cell-code  code-line-numbers=\"1,2,3,4,5,6,7|9,10,11,12,13,14,15|2,10|4,12|6,14|\"}\nscale_fill_dubois_c <- function(palette = \"dark\", reverse = FALSE, ...) {\n  if (!palette %in% c(\"dark\", \"light\")) stop('Palette should be \"dark\" or \"light\".')\n\n  pal <- dubois_pal_c(palette = palette, reverse = reverse)\n\n  ggplot2::scale_fill_gradientn(colours = pal(256), ...)\n}\n\nscale_color_dubois_c <- function(palette = \"dark\", reverse = FALSE, ...) {\n  if (!palette %in% c(\"dark\", \"light\")) stop('Palette should be \"dark\" or \"light\".')\n\n  pal <- dubois_pal_c(palette = palette, reverse = reverse)\n\n  ggplot2::scale_color_gradientn(colours = pal(256), ...)\n}\n```\n:::\n\n## Use Your Own `scale_color|fill_*_c()`\n\n::: {.cell output-location='column' hash='07_colors_cache/revealjs/dubois-scales-color-c-use-1_5596a7613d7fa646d0d61e730c90a6d4'}\n\n```{.r .cell-code  code-line-numbers=\"3,4,7|7,9\"}\nggplot(\n    bikes, \n    aes(x = temp_feel, y = count, \n        color = temp_feel)\n  ) +\n  geom_point() +\n  scale_color_dubois_c()\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/dubois-scales-color-c-use-1-1.png){width=1000}\n:::\n:::\n\n## Use Your Own `scale_color|fill_*_c()`\n\n::: {.cell output-location='column' hash='07_colors_cache/revealjs/dubois-scales-color-c-use-2_de4158f3144865336e93a55b73aac156'}\n\n```{.r .cell-code  code-line-numbers=\"8,9\"}\nggplot(\n    bikes, \n    aes(x = temp_feel, y = count, \n        color = temp_feel)\n  ) +\n  geom_point() +\n  scale_color_dubois_c(\n    palette = \"light\",\n    reverse = TRUE\n  )\n```\n\n::: {.cell-output-display}\n![](07_colors_files/figure-revealjs/dubois-scales-color-c-use-2-1.png){width=1000}\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\r\n<script>\r\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\r\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\r\n  // slide changes (different for each slide format).\r\n  (function () {\r\n    function fireSlideChanged(previousSlide, currentSlide) {\r\n\r\n      // dispatch for htmlwidgets\r\n      const event = window.document.createEvent(\"Event\");\r\n      event.initEvent(\"slideenter\", true, true);\r\n      window.document.dispatchEvent(event);\r\n\r\n      // dispatch for shiny\r\n      if (window.jQuery) {\r\n        if (previousSlide) {\r\n          window.jQuery(previousSlide).trigger(\"hidden\");\r\n        }\r\n        if (currentSlide) {\r\n          window.jQuery(currentSlide).trigger(\"shown\");\r\n        }\r\n      }\r\n    }\r\n\r\n    // hookup for reveal\r\n    if (window.Reveal) {\r\n      window.Reveal.addEventListener(\"slidechanged\", function(event) {\r\n        fireSlideChanged(event.previousSlide, event.currentSlide);\r\n      });\r\n    }\r\n\r\n    // hookup for slidy\r\n    if (window.w3c_slidy) {\r\n      window.w3c_slidy.add_observer(function (slide_num) {\r\n        // slide_num starts at position 1\r\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\r\n      });\r\n    }\r\n\r\n  })();\r\n</script>\r\n\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}